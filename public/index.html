<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="BirthVault - 精美的生日记录应用，记录亲朋好友的生日，再也不会忘记">
  <meta name="theme-color" content="#E8756A">
  <title>BirthVault — 生日记录</title>
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎂</text></svg>">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <!-- 导航栏 -->
  <nav class="navbar" id="navbar">
    <a href="/" class="navbar-brand">
      <div class="navbar-logo">
        <svg viewBox="0 0 24 24">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
      </div>
      <span class="navbar-title">BirthVault</span>
    </a>
    <div class="navbar-actions">
      <!-- 退出登录按钮 -->
      <button class="btn-icon" id="logoutBtn" title="退出登录">
        <svg viewBox="0 0 24 24">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
          <polyline points="16 17 21 12 16 7" />
          <line x1="21" y1="12" x2="9" y2="12" />
        </svg>
      </button>
      <!-- 主题切换按钮 -->
      <button class="btn-icon" id="themeToggle" title="切换主题">
        <svg id="iconSun" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
        <svg id="iconMoon" viewBox="0 0 24 24" style="display:none">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
      </button>
      <!-- 添加按钮 -->
      <button class="btn btn-primary" id="addBtn">
        <svg viewBox="0 0 24 24">
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
        <span class="btn-text">添加</span>
      </button>
    </div>
  </nav>

  <!-- 主内容 -->
  <main class="main-content" id="mainContent">
    <!-- 统计区域 -->
    <div class="stats-bar" id="statsBar">
      <div class="stat-card">
        <div class="stat-number" id="statTotal">0</div>
        <div class="stat-label">总记录</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statMonth">0</div>
        <div class="stat-label">本月生日</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statUpcoming">0</div>
        <div class="stat-label">7天内</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statToday">0</div>
        <div class="stat-label">今天生日</div>
      </div>
    </div>

    <!-- 搜索和过滤 -->
    <div class="toolbar" id="toolbar">
      <div class="search-box">
        <svg viewBox="0 0 24 24">
          <circle cx="11" cy="11" r="8" />
          <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </svg>
        <input type="text" class="search-input" id="searchInput" placeholder="搜索姓名...">
      </div>
      <div class="filter-group" id="filterGroup">
        <button class="filter-btn active" data-filter="all">全部</button>
      </div>
    </div>

    <!-- 加载骨架屏 -->
    <div class="birthday-grid" id="skeletonGrid">
      <div class="skeleton skeleton-card"></div>
      <div class="skeleton skeleton-card"></div>
      <div class="skeleton skeleton-card"></div>
    </div>

    <!-- 生日卡片列表 -->
    <div class="birthday-grid" id="birthdayGrid" style="display:none"></div>

    <!-- 空状态 -->
    <div class="empty-state" id="emptyState" style="display:none">
      <div class="empty-illustration">
        <svg viewBox="0 0 24 24">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
          <line x1="16" y1="2" x2="16" y2="6" />
          <line x1="8" y1="2" x2="8" y2="6" />
          <line x1="3" y1="10" x2="21" y2="10" />
          <line x1="10" y1="14" x2="14" y2="14" />
          <line x1="12" y1="12" x2="12" y2="16" />
        </svg>
      </div>
      <h2 class="empty-title">还没有记录</h2>
      <p class="empty-desc">点击「添加」按钮记录第一个生日吧！再也不会忘记亲朋好友的生日了 ✨</p>
      <button class="btn btn-primary" id="emptyAddBtn">
        <svg viewBox="0 0 24 24">
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
        添加第一个生日
      </button>
    </div>
  </main>

  <!-- 添加/编辑模态框 -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">添加生日</h3>
        <button class="modal-close" id="modalClose">
          <svg viewBox="0 0 24 24">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form id="birthdayForm">
          <input type="hidden" id="formId" value="">
          <div class="form-group">
            <label class="form-label" for="formName">姓名 *</label>
            <input type="text" class="form-input" id="formName" placeholder="输入姓名" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">生日日期 *</label>
              <div class="date-trigger" id="dateTrigger">
                <svg viewBox="0 0 24 24">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                  <line x1="16" y1="2" x2="16" y2="6" />
                  <line x1="8" y1="2" x2="8" y2="6" />
                  <line x1="3" y1="10" x2="21" y2="10" />
                </svg>
                <span class="date-trigger-text" id="dateTriggerText">点击选择日期</span>
                <svg class="date-trigger-arrow" viewBox="0 0 24 24">
                  <polyline points="6 9 12 15 18 9" />
                </svg>
              </div>
              <input type="hidden" id="formBirthday" value="">
              <input type="hidden" id="formLunar" value="1">
            </div>
            <div class="form-group">
              <label class="form-label">关系</label>
              <input type="hidden" id="formRelation" value="">
              <div class="relation-picker" id="relationPicker">
                <button type="button" class="relation-chip" data-value="家人"><span
                    class="relation-chip-icon">👨‍👩‍👧</span>家人</button>
                <button type="button" class="relation-chip" data-value="朋友"><span
                    class="relation-chip-icon">🤝</span>朋友</button>
                <button type="button" class="relation-chip" data-value="同事"><span
                    class="relation-chip-icon">💼</span>同事</button>
                <button type="button" class="relation-chip" data-value="同学"><span
                    class="relation-chip-icon">🎓</span>同学</button>
                <button type="button" class="relation-chip" data-value="亲戚"><span
                    class="relation-chip-icon">🏠</span>亲戚</button>
                <button type="button" class="relation-chip" data-value="其他"><span
                    class="relation-chip-icon">⭐</span>其他</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="formPhone">联系电话</label>
            <input type="tel" class="form-input" id="formPhone" placeholder="可选">
          </div>
          <div class="form-group">
            <label class="form-label">选择头像</label>
            <div class="emoji-picker" id="emojiPicker">
              <button type="button" class="emoji-option selected" data-emoji="🎂">🎂</button>
              <button type="button" class="emoji-option" data-emoji="👨">👨</button>
              <button type="button" class="emoji-option" data-emoji="👩">👩</button>
              <button type="button" class="emoji-option" data-emoji="👴">👴</button>
              <button type="button" class="emoji-option" data-emoji="👵">👵</button>
              <button type="button" class="emoji-option" data-emoji="👦">👦</button>
              <button type="button" class="emoji-option" data-emoji="👧">👧</button>
              <button type="button" class="emoji-option" data-emoji="👶">👶</button>
              <button type="button" class="emoji-option" data-emoji="💑">💑</button>
              <button type="button" class="emoji-option" data-emoji="👨‍👩‍👧">👨‍👩‍👧</button>
              <button type="button" class="emoji-option" data-emoji="🎉">🎉</button>
              <button type="button" class="emoji-option" data-emoji="⭐">⭐</button>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="formNotes">备注</label>
            <textarea class="form-textarea" id="formNotes" placeholder="添加一些备注信息..."></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" id="formCancel">取消</button>
            <button type="submit" class="btn btn-primary" id="formSubmit">保存</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 删除确认框 -->
  <div class="confirm-overlay" id="confirmOverlay">
    <div class="confirm-dialog">
      <h3 class="confirm-title">确认删除</h3>
      <p class="confirm-message" id="confirmMessage">确定要删除这条记录吗？此操作不可撤销。</p>
      <div class="confirm-actions">
        <button class="btn btn-secondary" id="confirmCancel">取消</button>
        <button class="btn btn-danger" id="confirmDelete">删除</button>
      </div>
    </div>
  </div>

  <!-- 日期选择器 -->
  <div class="datepicker-overlay" id="datepickerOverlay">
    <div class="datepicker" id="datepicker">
      <div class="datepicker-header">
        <button class="datepicker-cancel" id="datepickerCancel">取消</button>
        <div class="datepicker-type-toggle">
          <button class="datepicker-type-btn active" id="btnLunar" data-type="lunar">农历</button>
          <button class="datepicker-type-btn" id="btnSolar" data-type="solar">公历</button>
        </div>
        <button class="datepicker-confirm" id="datepickerConfirm">确定</button>
      </div>
      <div class="datepicker-body">
        <div class="datepicker-indicator"></div>
        <div class="datepicker-columns">
          <div class="datepicker-column" id="dpYear"></div>
          <div class="datepicker-column" id="dpMonth"></div>
          <div class="datepicker-column" id="dpDay"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast 容器 -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="/js/lunar.js"></script>
  <script src="/js/utils.js"></script>
  <script src="/js/api.js"></script>
  <script src="/js/components.js"></script>
  <script src="/js/app.js"></script>
</body>

</html>